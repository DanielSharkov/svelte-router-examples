import{S as e,i as t,s,V as n,e as l,b as o,t as c,c as a,f as r,g as i,l as m,h as p,z as u,w as h,A as d,v as f,n as v,R as g,x as b,$ as w,a0 as x,y as q,B as k,C,D as L,E as M,Z as y,r as D}from"./main-e9d5581a.js";import{T as $}from"./Thread-ac17e56d.js";function B(e,t,s){const n=e.slice();return n[17]=t[s],n}function I(e){let t;return{c(){t=l("span"),t.textContent="You",a(t,"class","is-session-user svelte-pbmq0h")},m(e,s){r(e,t,s)},d(e){e&&v(t)}}}function H(e){let t,s,n;return{c(){t=l("button"),t.innerHTML='<svg class="icon stroke icon-1 svelte-pbmq0h" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M57.7778 25H35C29.4772 25 25 29.4772 25 35V85C25 90.5228 29.4772 95 35 95H85C90.5228 95 95 90.5228 95 85V62.2222" stroke-width="6" stroke-linecap="round" class="svelte-pbmq0h"></path><path d="M105 15L60 60M105 15L105 45M105 15L75 15" stroke-width="6" stroke-linecap="round" class="svelte-pbmq0h"></path></svg>',a(t,"class","open-page flex flex-center flex-self-right svelte-pbmq0h")},m(l,o){r(l,t,o),s||(n=m(t,"click",e[9]),s=!0)},p:b,d(e){e&&v(t),s=!1,n()}}}function P(e){let t,s,n,c,i;function m(e,t){return null!==e[5]?j:V}let p=m(e),g=p(e),b=e[3],w=[];for(let t=0;t<b.length;t+=1)w[t]=N(B(e,b,t));const x=e=>h(w[e],1,1,(()=>{w[e]=null}));let C=e[4]&&W(e);return{c(){t=l("div"),g.c(),s=o();for(let e=0;e<w.length;e+=1)w[e].c();n=o(),C&&C.c(),c=q(),a(t,"class","write-comment svelte-pbmq0h")},m(e,l){r(e,t,l),g.m(t,null),r(e,s,l);for(let t=0;t<w.length;t+=1)w[t].m(e,l);r(e,n,l),C&&C.m(e,l),r(e,c,l),i=!0},p(e,s){if(p===(p=m(e))&&g?g.p(e,s):(g.d(1),g=p(e),g&&(g.c(),g.m(t,null))),8&s){let t;for(b=e[3],t=0;t<b.length;t+=1){const l=B(e,b,t);w[t]?(w[t].p(l,s),f(w[t],1)):(w[t]=N(l),w[t].c(),f(w[t],1),w[t].m(n.parentNode,n))}for(u(),t=b.length;t<w.length;t+=1)x(t);d()}e[4]?C?C.p(e,s):(C=W(e),C.c(),C.m(c.parentNode,c)):C&&(C.d(1),C=null)},i(e){if(!i){for(let e=0;e<b.length;e+=1)f(w[e]);i=!0}},o(e){w=w.filter(Boolean);for(let e=0;e<w.length;e+=1)h(w[e]);i=!1},d(e){e&&v(t),g.d(),e&&v(s),k(w,e),e&&v(n),C&&C.d(e),e&&v(c)}}}function T(e){let t,s,n;return{c(){t=l("button"),t.textContent="Load comments...",a(t,"class","load-comments svelte-pbmq0h")},m(l,o){r(l,t,o),s||(n=m(t,"click",e[11]),s=!0)},p:b,i:b,o:b,d(e){e&&v(t),s=!1,n()}}}function V(e){let t,s,n;return{c(){t=l("button"),t.textContent="+ Write a comment",a(t,"class","write-comment-btn svelte-pbmq0h")},m(l,o){r(l,t,o),s||(n=m(t,"click",e[14]),s=!0)},p:b,d(e){e&&v(t),s=!1,n()}}}function j(e){let t,s,n,c,i,p,u;return{c(){t=l("button"),t.innerHTML='<svg class="icon stroke icon-1 svelte-pbmq0h" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M28.2998 91.5788L91.7007 27.7007M91.7002 91.5787L28.2993 27.7007" stroke-width="6" stroke-linecap="round" class="svelte-pbmq0h"></path></svg>',s=o(),n=l("textarea"),c=o(),i=l("button"),i.innerHTML='<svg class="icon stroke icon-1 svelte-pbmq0h" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18.3604 68.6396L42.103 92.3822L105.504 28.5042" stroke-width="6" stroke-linecap="round" class="svelte-pbmq0h"></path></svg>',a(t,"class","discard flex flex-center"),a(n,"rows","1"),a(n,"placeholder","Write a comment..."),a(n,"class","svelte-pbmq0h"),a(i,"class","submit flex flex-center")},m(l,o){r(l,t,o),r(l,s,o),r(l,n,o),y(n,e[5]),r(l,c,o),r(l,i,o),p||(u=[m(t,"click",e[12]),m(n,"input",e[13]),m(i,"click",e[8])],p=!0)},p(e,t){32&t&&y(n,e[5])},d(e){e&&v(t),e&&v(s),e&&v(n),e&&v(c),e&&v(i),p=!1,D(u)}}}function N(e){let t,s;return t=new $({props:{comment:e[17],level:3}}),{c(){C(t.$$.fragment)},m(e,n){L(t,e,n),s=!0},p(e,s){const n={};8&s&&(n.comment=e[17]),t.$set(n)},i(e){s||(f(t.$$.fragment,e),s=!0)},o(e){h(t.$$.fragment,e),s=!1},d(e){M(t,e)}}}function W(e){let t,s,n;return{c(){t=l("button"),t.textContent="Load more comments...",a(t,"class","load-comments svelte-pbmq0h")},m(l,o){r(l,t,o),s||(n=m(t,"click",e[15]),s=!0)},p:b,d(e){e&&v(t),s=!1,n()}}}function z(e){let t,s,g,b,w,x,q,k,C,L,M,y,D,$,B,V,j,N,W,z,A,E,R,S=n.userByID(e[0].userID).name+"",Y=e[0].title+"",Z=e[0].body+"",F=e[0].userID===e[6].session&&I(),G=!e[2]&&H(e);const J=[T,P],K=[];function O(e,t){return!e[1]&&e[3].length<1&&e[4]?0:1}return W=O(e),z=K[W]=J[W](e),{c(){t=l("div"),s=l("div"),g=l("button"),b=l("div"),b.innerHTML='<svg class="icon stroke svelte-pbmq0h" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><path d="M103 107V96c0-14-11-25-25-25H42c-14 0-25 11-25 25v11" stroke-width="6" stroke-linecap="round" class="svelte-pbmq0h"></path><circle cx="60" cy="34" r="21" stroke-width="6" class="svelte-pbmq0h"></circle></svg>',w=o(),x=l("span"),q=c(S),k=o(),F&&F.c(),C=o(),G&&G.c(),L=o(),M=l("div"),y=l("span"),D=c(Y),$=o(),B=l("p"),V=c(Z),j=o(),N=l("div"),z.c(),a(b,"class","user-image flex flex-center svelte-pbmq0h"),a(g,"class","user flex flex-center-y gap-1 svelte-pbmq0h"),a(s,"class","header flex flex-center-y gap-1 svelte-pbmq0h"),a(y,"class","title svelte-pbmq0h"),a(B,"class","message svelte-pbmq0h"),a(M,"class","body svelte-pbmq0h"),a(N,"class","comments svelte-pbmq0h"),a(t,"class","post svelte-pbmq0h")},m(n,l){r(n,t,l),i(t,s),i(s,g),i(g,b),i(g,w),i(g,x),i(x,q),i(g,k),F&&F.m(g,null),i(s,C),G&&G.m(s,null),i(t,L),i(t,M),i(M,y),i(y,D),i(M,$),i(M,B),i(B,V),i(t,j),i(t,N),K[W].m(N,null),A=!0,E||(R=m(g,"click",e[10]),E=!0)},p(e,[t]){(!A||1&t)&&S!==(S=n.userByID(e[0].userID).name+"")&&p(q,S),e[0].userID===e[6].session?F||(F=I(),F.c(),F.m(g,null)):F&&(F.d(1),F=null),e[2]?G&&(G.d(1),G=null):G?G.p(e,t):(G=H(e),G.c(),G.m(s,null)),(!A||1&t)&&Y!==(Y=e[0].title+"")&&p(D,Y),(!A||1&t)&&Z!==(Z=e[0].body+"")&&p(V,Z);let l=W;W=O(e),W===l?K[W].p(e,t):(u(),h(K[l],1,1,(()=>{K[l]=null})),d(),z=K[W],z?z.p(e,t):(z=K[W]=J[W](e),z.c()),f(z,1),z.m(N,null))},i(e){A||(f(z),A=!0)},o(e){h(z),A=!1},d(e){e&&v(t),F&&F.d(),G&&G.d(),K[W].d(),E=!1,R()}}}function A(e,t,s){let l;g(e,n,(e=>s(6,l=e)));let{post:o}=t,{loadComments:c=!1}=t,{isPage:a=!1}=t,r=[],i=0,m=!0;function p(e=10){const t=n.commentsByPost(i,e,o.id);t.length<e&&s(4,m=!1),i+=e,s(3,r=r.concat(t))}c&&p(3);let u=null;return e.$$set=e=>{"post"in e&&s(0,o=e.post),"loadComments"in e&&s(1,c=e.loadComments),"isPage"in e&&s(2,a=e.isPage)},[o,c,a,r,m,u,l,p,function(){""!==u&&(r.splice(0,0,n.submitComment(w.Post,o.id,u)),s(3,r),s(5,u=null),i++)},function(){x.push("post",{postID:o.id})},()=>x.push("profile",{userID:o.userID}),()=>p(3),()=>s(5,u=null),function(){u=this.value,s(5,u)},()=>s(5,u=""),()=>p()]}class E extends e{constructor(e){super(),t(this,e,A,z,s,{post:0,loadComments:1,isPage:2})}}export{E as P};
