import{S as e,i as t,s as n,D as s,e as l,a as o,t as c,b as r,J as a,c as i,d as u,l as m,y as d,q as h,z as p,n as f,p as v,h as x,u as g,B as b,I as w,G as k,H as D,C as I,E as y,j as C,v as B,w as L,x as M}from"./main-a438d98d.js";function T(e,t,n){const s=e.slice();return s[3]=t[n],s}function $(e){let t,n,s;function o(e,t){return e[3].onEntity===k.Post?P:H}let c=o(e),a=c(e);return{c(){t=l("button"),a.c(),r(t,"class","reference svelte-hx5b0t")},m(l,o){i(l,t,o),a.m(t,null),n||(s=m(t,"click",e[11]),n=!0)},p(e,n){c===(c=o(e))&&a?a.p(e,n):(a.d(1),a=c(e),a&&(a.c(),a.m(t,null)))},d(e){e&&x(t),a.d(),n=!1,s()}}}function H(e){let t,n,l=s.userByID(e[3].userID).name+"";return{c(){t=c("From a comment of "),n=c(l)},m(e,s){i(e,t,s),i(e,n,s)},p(e,t){8&t&&l!==(l=s.userByID(e[3].userID).name+"")&&d(n,l)},d(e){e&&x(t),e&&x(n)}}}function P(e){let t,n,l=s.userByID(e[3].userID).name+"";return{c(){t=c("From a post comment of "),n=c(l)},m(e,s){i(e,t,s),i(e,n,s)},p(e,t){8&t&&l!==(l=s.userByID(e[3].userID).name+"")&&d(n,l)},d(e){e&&x(t),e&&x(n)}}}function E(e){let t;return{c(){t=l("span"),t.textContent="You",r(t,"class","is-session-user svelte-hx5b0t")},m(e,n){i(e,t,n)},d(e){e&&x(t)}}}function V(e){let t,n,s;return{c(){t=l("button"),t.innerHTML='<svg class="icon stroke icon-1 svelte-hx5b0t" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M57.7778 25H35C29.4772 25 25 29.4772 25 35V85C25 90.5228 29.4772 95 35 95H85C90.5228 95 95 90.5228 95 85V62.2222" stroke-width="6" stroke-linecap="round"></path><path d="M105 15L60 60M105 15L105 45M105 15L75 15" stroke-width="6" stroke-linecap="round"></path></svg>',r(t,"class","open-page flex flex-center flex-self-right svelte-hx5b0t")},m(l,o){i(l,t,o),n||(s=m(t,"click",e[12]),n=!0)},p:b,d(e){e&&x(t),n=!1,s()}}}function j(e){let t,n,s;return{c(){t=l("button"),t.textContent="+ Write a comment",r(t,"class","write-comment-btn svelte-hx5b0t")},m(l,o){i(l,t,o),n||(s=m(t,"click",e[17]),n=!0)},p:b,d(e){e&&x(t),n=!1,s()}}}function F(e){let t,n,s,c,a,d,h,p;return{c(){t=l("div"),n=l("button"),n.innerHTML='<svg class="icon stroke icon-1 svelte-hx5b0t" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M28.2998 91.5788L91.7007 27.7007M91.7002 91.5787L28.2993 27.7007" stroke-width="10" stroke-linecap="round" class="svelte-hx5b0t"></path></svg>',s=o(),c=l("textarea"),a=o(),d=l("button"),d.innerHTML='<svg class="icon stroke icon-1 svelte-hx5b0t" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18.3604 68.6396L42.103 92.3822L105.504 28.5042" stroke-width="10" stroke-linecap="round" class="svelte-hx5b0t"></path></svg>',r(n,"class","discard flex flex-center"),r(c,"rows","1"),r(c,"placeholder","Write a comment..."),r(c,"class","svelte-hx5b0t"),r(d,"class","submit flex flex-center"),r(t,"class","write-comment svelte-hx5b0t")},m(l,o){i(l,t,o),u(t,n),u(t,s),u(t,c),I(c,e[6]),u(t,a),u(t,d),h||(p=[m(n,"click",e[15]),m(c,"input",e[16]),m(d,"click",e[10])],h=!0)},p(e,t){64&t&&I(c,e[6])},d(e){e&&x(t),h=!1,y(p)}}}function W(e){let t,n,s,l;const o=[z,q],c=[];function r(e,t){return e[0]<5?0:1}return t=r(e),n=c[t]=o[t](e),{c(){n.c(),s=w()},m(e,n){c[t].m(e,n),i(e,s,n),l=!0},p(e,l){let a=t;t=r(e),t===a?c[t].p(e,l):(p(),f(c[a],1,1,(()=>{c[a]=null})),v(),n=c[t],n?n.p(e,l):(n=c[t]=o[t](e),n.c()),h(n,1),n.m(s.parentNode,s))},i(e){l||(h(n),l=!0)},o(e){f(n),l=!1},d(e){c[t].d(e),e&&x(s)}}}function q(e){let t,n,s;return{c(){t=l("button"),t.textContent="Open this thread...",r(t,"class","open-thread svelte-hx5b0t")},m(l,o){i(l,t,o),n||(s=m(t,"click",e[19]),n=!0)},p:b,i:b,o:b,d(e){e&&x(t),n=!1,s()}}}function z(e){let t,n,s,c=e[4],a=[];for(let t=0;t<c.length;t+=1)a[t]=G(T(e,c,t));const m=e=>f(a[e],1,1,(()=>{a[e]=null}));let d=e[5]&&J(e);return{c(){t=l("div");for(let e=0;e<a.length;e+=1)a[e].c();n=o(),d&&d.c(),r(t,"class","thread svelte-hx5b0t")},m(e,l){i(e,t,l);for(let e=0;e<a.length;e+=1)a[e].m(t,null);u(t,n),d&&d.m(t,null),s=!0},p(e,s){if(21&s){let l;for(c=e[4],l=0;l<c.length;l+=1){const o=T(e,c,l);a[l]?(a[l].p(o,s),h(a[l],1)):(a[l]=G(o),a[l].c(),h(a[l],1),a[l].m(t,n))}for(p(),l=c.length;l<a.length;l+=1)m(l);v()}e[5]?d?d.p(e,s):(d=J(e),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},i(e){if(!s){for(let e=0;e<c.length;e+=1)h(a[e]);s=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)f(a[e]);s=!1},d(e){e&&x(t),C(a,e),d&&d.d()}}}function G(e){let t,n;return t=new S({props:{level:e[0]+1,comment:e[3],isPage:e[2]}}),{c(){B(t.$$.fragment)},m(e,s){L(t,e,s),n=!0},p(e,n){const s={};1&n&&(s.level=e[0]+1),16&n&&(s.comment=e[3]),4&n&&(s.isPage=e[2]),t.$set(s)},i(e){n||(h(t.$$.fragment,e),n=!0)},o(e){f(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function J(e){let t,n,s;return{c(){t=l("button"),t.textContent="Load thread...",r(t,"class","load-thread svelte-hx5b0t")},m(l,o){i(l,t,o),n||(s=m(t,"click",e[18]),n=!0)},p:b,d(e){e&&x(t),n=!1,s()}}}function N(e){let t,n,g,b,w,k,D,I,y,C,B,L,M,T,H,P,q,z,G=s.userByID(e[3].userID).name+"",J=e[3].body+"",N=e[1]&&$(e),O=e[3].userID===e[8].session&&E(),S=!e[2]&&V(e);function Y(e,t){return null!==e[6]?F:j}let A=Y(e),K=A(e),Q=e[7]&&W(e);return{c(){t=l("div"),N&&N.c(),n=o(),g=l("div"),b=l("button"),w=l("div"),w.innerHTML='<svg class="icon stroke svelte-hx5b0t" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><path d="M103 107V96c0-14-11-25-25-25H42c-14 0-25 11-25 25v11" stroke-width="6" stroke-linecap="round"></path><circle cx="60" cy="34" r="21" stroke-width="6"></circle></svg>',k=o(),D=l("span"),I=c(G),y=o(),O&&O.c(),C=o(),S&&S.c(),B=o(),L=l("p"),M=c(J),T=o(),K.c(),H=o(),Q&&Q.c(),r(w,"class","user-image flex flex-center svelte-hx5b0t"),r(b,"class","user flex flex-center-y gap-1 svelte-hx5b0t"),r(g,"class","header flex flex-center-y"),r(L,"class","message"),r(t,"class","comment svelte-hx5b0t"),a(t,"single-thread",e[1])},m(s,l){i(s,t,l),N&&N.m(t,null),u(t,n),u(t,g),u(g,b),u(b,w),u(b,k),u(b,D),u(D,I),u(b,y),O&&O.m(b,null),u(g,C),S&&S.m(g,null),u(t,B),u(t,L),u(L,M),u(t,T),K.m(t,null),u(t,H),Q&&Q.m(t,null),P=!0,q||(z=m(b,"click",e[14]),q=!0)},p(e,[l]){e[1]?N?N.p(e,l):(N=$(e),N.c(),N.m(t,n)):N&&(N.d(1),N=null),(!P||8&l)&&G!==(G=s.userByID(e[3].userID).name+"")&&d(I,G),e[3].userID===e[8].session?O||(O=E(),O.c(),O.m(b,null)):O&&(O.d(1),O=null),e[2]?S&&(S.d(1),S=null):S?S.p(e,l):(S=V(e),S.c(),S.m(g,null)),(!P||8&l)&&J!==(J=e[3].body+"")&&d(M,J),A===(A=Y(e))&&K?K.p(e,l):(K.d(1),K=A(e),K&&(K.c(),K.m(t,H))),e[7]?Q?(Q.p(e,l),128&l&&h(Q,1)):(Q=W(e),Q.c(),h(Q,1),Q.m(t,null)):Q&&(p(),f(Q,1,1,(()=>{Q=null})),v()),(!P||2&l)&&a(t,"single-thread",e[1])},i(e){P||(h(Q),P=!0)},o(e){f(Q),P=!1},d(e){e&&x(t),N&&N.d(),O&&O.d(),S&&S.d(),K.d(),Q&&Q.d(),q=!1,z()}}}function O(e,t,n){let l;g(e,s,(e=>n(8,l=e)));let{comment:o}=t,{level:c=0}=t,{loadComments:r=!1}=t,{singleThread:a=!1}=t,{isPage:i=!1}=t,u=[],m=0,d=!0;function h(e=10){const t=s.getThread(m,e,o.id);t.length<e&&n(5,d=!1),m+=e,n(4,u=u.concat(t))}r&&h(3);let p=null;let f=s.hasThreadComments(o.id);return e.$$set=e=>{"comment"in e&&n(3,o=e.comment),"level"in e&&n(0,c=e.level),"loadComments"in e&&n(13,r=e.loadComments),"singleThread"in e&&n(1,a=e.singleThread),"isPage"in e&&n(2,i=e.isPage)},[c,a,i,o,u,d,p,f,l,h,function(){""!==p&&(u.splice(0,0,s.submitComment(k.Comment,o.id,p)),n(4,u),f||(n(5,d=!1),m=1,n(7,f=!0)),n(6,p=null))},function(){o.onEntity!==k.Post?D.push("thread",{threadID:o.entityID}):D.push("post",{postID:o.entityID})},function(){D.push("thread",{threadID:o.id})},r,()=>D.push("profile",{userID:o.userID}),()=>n(6,p=null),function(){p=this.value,n(6,p)},()=>n(6,p=""),()=>h(),()=>D.push("thread",{threadID:o.id})]}class S extends e{constructor(e){super(),t(this,e,O,N,n,{comment:3,level:0,loadComments:13,singleThread:1,isPage:2})}}export{S as T};
