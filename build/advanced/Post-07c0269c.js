import{S as e,i as t,s,D as n,e as l,a as o,t as c,b as a,c as r,d as i,l as m,y as p,z as u,n as h,p as d,q as f,h as v,u as b,B as g,G as w,H as x,I as q,j as k,v as C,w as L,x as M,C as y,E as D}from"./main-81db1163.js";import{T as I}from"./Thread-e10f4825.js";function B(e,t,s){const n=e.slice();return n[17]=t[s],n}function $(e){let t;return{c(){t=l("span"),t.textContent="You",a(t,"class","is-session-user svelte-pbmq0h")},m(e,s){r(e,t,s)},d(e){e&&v(t)}}}function H(e){let t,s,n;return{c(){t=l("button"),t.innerHTML='<svg class="icon stroke icon-1 svelte-pbmq0h" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M57.7778 25H35C29.4772 25 25 29.4772 25 35V85C25 90.5228 29.4772 95 35 95H85C90.5228 95 95 90.5228 95 85V62.2222" stroke-width="6" stroke-linecap="round" class="svelte-pbmq0h"></path><path d="M105 15L60 60M105 15L105 45M105 15L75 15" stroke-width="6" stroke-linecap="round" class="svelte-pbmq0h"></path></svg>',a(t,"class","open-page flex flex-center flex-self-right svelte-pbmq0h")},m(l,o){r(l,t,o),s||(n=m(t,"click",e[9]),s=!0)},p:g,d(e){e&&v(t),s=!1,n()}}}function P(e){let t,s,n,c,i;function m(e,t){return null!==e[5]?V:j}let p=m(e),b=p(e),g=e[3],w=[];for(let t=0;t<g.length;t+=1)w[t]=N(B(e,g,t));const x=e=>h(w[e],1,1,(()=>{w[e]=null}));let C=e[4]&&W(e);return{c(){t=l("div"),b.c(),s=o();for(let e=0;e<w.length;e+=1)w[e].c();n=o(),C&&C.c(),c=q(),a(t,"class","write-comment svelte-pbmq0h")},m(e,l){r(e,t,l),b.m(t,null),r(e,s,l);for(let t=0;t<w.length;t+=1)w[t].m(e,l);r(e,n,l),C&&C.m(e,l),r(e,c,l),i=!0},p(e,s){if(p===(p=m(e))&&b?b.p(e,s):(b.d(1),b=p(e),b&&(b.c(),b.m(t,null))),8&s){let t;for(g=e[3],t=0;t<g.length;t+=1){const l=B(e,g,t);w[t]?(w[t].p(l,s),f(w[t],1)):(w[t]=N(l),w[t].c(),f(w[t],1),w[t].m(n.parentNode,n))}for(u(),t=g.length;t<w.length;t+=1)x(t);d()}e[4]?C?C.p(e,s):(C=W(e),C.c(),C.m(c.parentNode,c)):C&&(C.d(1),C=null)},i(e){if(!i){for(let e=0;e<g.length;e+=1)f(w[e]);i=!0}},o(e){w=w.filter(Boolean);for(let e=0;e<w.length;e+=1)h(w[e]);i=!1},d(e){e&&v(t),b.d(),e&&v(s),k(w,e),e&&v(n),C&&C.d(e),e&&v(c)}}}function T(e){let t,s,n;return{c(){t=l("button"),t.textContent="Load comments...",a(t,"class","load-comments svelte-pbmq0h")},m(l,o){r(l,t,o),s||(n=m(t,"click",e[11]),s=!0)},p:g,i:g,o:g,d(e){e&&v(t),s=!1,n()}}}function j(e){let t,s,n;return{c(){t=l("button"),t.textContent="+ Write a comment",a(t,"class","write-comment-btn svelte-pbmq0h")},m(l,o){r(l,t,o),s||(n=m(t,"click",e[14]),s=!0)},p:g,d(e){e&&v(t),s=!1,n()}}}function V(e){let t,s,n,c,i,p,u;return{c(){t=l("button"),t.innerHTML='<svg class="icon stroke icon-1 svelte-pbmq0h" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M28.2998 91.5788L91.7007 27.7007M91.7002 91.5787L28.2993 27.7007" stroke-width="6" stroke-linecap="round" class="svelte-pbmq0h"></path></svg>',s=o(),n=l("textarea"),c=o(),i=l("button"),i.innerHTML='<svg class="icon stroke icon-1 svelte-pbmq0h" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18.3604 68.6396L42.103 92.3822L105.504 28.5042" stroke-width="6" stroke-linecap="round" class="svelte-pbmq0h"></path></svg>',a(t,"class","discard flex flex-center"),a(n,"rows","1"),a(n,"placeholder","Write a comment..."),a(n,"class","svelte-pbmq0h"),a(i,"class","submit flex flex-center")},m(l,o){r(l,t,o),r(l,s,o),r(l,n,o),y(n,e[5]),r(l,c,o),r(l,i,o),p||(u=[m(t,"click",e[12]),m(n,"input",e[13]),m(i,"click",e[8])],p=!0)},p(e,t){32&t&&y(n,e[5])},d(e){e&&v(t),e&&v(s),e&&v(n),e&&v(c),e&&v(i),p=!1,D(u)}}}function N(e){let t,s;return t=new I({props:{comment:e[17],level:3}}),{c(){C(t.$$.fragment)},m(e,n){L(t,e,n),s=!0},p(e,s){const n={};8&s&&(n.comment=e[17]),t.$set(n)},i(e){s||(f(t.$$.fragment,e),s=!0)},o(e){h(t.$$.fragment,e),s=!1},d(e){M(t,e)}}}function W(e){let t,s,n;return{c(){t=l("button"),t.textContent="Load more comments...",a(t,"class","load-comments svelte-pbmq0h")},m(l,o){r(l,t,o),s||(n=m(t,"click",e[15]),s=!0)},p:g,d(e){e&&v(t),s=!1,n()}}}function z(e){let t,s,b,g,w,x,q,k,C,L,M,y,D,I,B,j,V,N,W,z,E,G,S,Y=n.userByID(e[0].userID).name+"",A=e[0].title+"",F=e[0].body+"",J=e[0].userID===e[6].session&&$(),K=!e[2]&&H(e);const O=[T,P],Q=[];function R(e,t){return!e[1]&&e[3].length<1&&e[4]?0:1}return W=R(e),z=Q[W]=O[W](e),{c(){t=l("div"),s=l("div"),b=l("button"),g=l("div"),g.innerHTML='<svg class="icon stroke svelte-pbmq0h" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120"><path d="M103 107V96c0-14-11-25-25-25H42c-14 0-25 11-25 25v11" stroke-width="6" stroke-linecap="round" class="svelte-pbmq0h"></path><circle cx="60" cy="34" r="21" stroke-width="6" class="svelte-pbmq0h"></circle></svg>',w=o(),x=l("span"),q=c(Y),k=o(),J&&J.c(),C=o(),K&&K.c(),L=o(),M=l("div"),y=l("span"),D=c(A),I=o(),B=l("p"),j=c(F),V=o(),N=l("div"),z.c(),a(g,"class","user-image flex flex-center svelte-pbmq0h"),a(b,"class","user flex flex-center-y gap-1 svelte-pbmq0h"),a(s,"class","header flex flex-center-y gap-1 svelte-pbmq0h"),a(y,"class","title svelte-pbmq0h"),a(B,"class","message svelte-pbmq0h"),a(M,"class","body svelte-pbmq0h"),a(N,"class","comments svelte-pbmq0h"),a(t,"class","post svelte-pbmq0h")},m(n,l){r(n,t,l),i(t,s),i(s,b),i(b,g),i(b,w),i(b,x),i(x,q),i(b,k),J&&J.m(b,null),i(s,C),K&&K.m(s,null),i(t,L),i(t,M),i(M,y),i(y,D),i(M,I),i(M,B),i(B,j),i(t,V),i(t,N),Q[W].m(N,null),E=!0,G||(S=m(b,"click",e[10]),G=!0)},p(e,[t]){(!E||1&t)&&Y!==(Y=n.userByID(e[0].userID).name+"")&&p(q,Y),e[0].userID===e[6].session?J||(J=$(),J.c(),J.m(b,null)):J&&(J.d(1),J=null),e[2]?K&&(K.d(1),K=null):K?K.p(e,t):(K=H(e),K.c(),K.m(s,null)),(!E||1&t)&&A!==(A=e[0].title+"")&&p(D,A),(!E||1&t)&&F!==(F=e[0].body+"")&&p(j,F);let l=W;W=R(e),W===l?Q[W].p(e,t):(u(),h(Q[l],1,1,(()=>{Q[l]=null})),d(),z=Q[W],z?z.p(e,t):(z=Q[W]=O[W](e),z.c()),f(z,1),z.m(N,null))},i(e){E||(f(z),E=!0)},o(e){h(z),E=!1},d(e){e&&v(t),J&&J.d(),K&&K.d(),Q[W].d(),G=!1,S()}}}function E(e,t,s){let l;b(e,n,(e=>s(6,l=e)));let{post:o}=t,{loadComments:c=!1}=t,{isPage:a=!1}=t,r=[],i=0,m=!0;function p(e=10){const t=n.commentsByPost(i,e,o.id);t.length<e&&s(4,m=!1),i+=e,s(3,r=r.concat(t))}c&&p(3);let u=null;return e.$$set=e=>{"post"in e&&s(0,o=e.post),"loadComments"in e&&s(1,c=e.loadComments),"isPage"in e&&s(2,a=e.isPage)},[o,c,a,r,m,u,l,p,function(){""!==u&&(r.splice(0,0,n.submitComment(w.Post,o.id,u)),s(3,r),s(5,u=null),i++)},function(){x.push("post",{postID:o.id})},()=>x.push("profile",{userID:o.userID}),()=>p(3),()=>s(5,u=null),function(){u=this.value,s(5,u)},()=>s(5,u=""),()=>p()]}class G extends e{constructor(e){super(),t(this,e,E,z,s,{post:0,loadComments:1,isPage:2})}}export{G as P};
