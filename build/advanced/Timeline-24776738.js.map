{"version":3,"file":"Timeline-24776738.js","sources":["../../../advanced/routes/Timeline.svelte"],"sourcesContent":["<script lang='ts'>\n\timport {onMount, createEventDispatcher} from 'svelte'\n\timport {defaultPageTransition} from '../utils'\n\timport Post from '../components/Post.svelte'\n\timport {cubicInOut} from 'svelte/easing'\n\timport DB from '../database'\n\n\tconst dispatch = createEventDispatcher()\n\n\tonMount(()=> {\n\t\tdispatch('hasOutro')\n\t})\n\n\tlet posts = []\n\tlet offset = 0\n\t$:isLastPostReached = $DB.posts.length > offset\n\tfunction fetchPosts() {\n\t\tconst newOffset = (\n\t\t\t$DB.posts.length < offset + 10 ?\n\t\t\t\t$DB.posts.length : offset + 10\n\t\t)\n\t\tposts = posts.concat($DB.posts.slice(offset, newOffset))\n\t\toffset = newOffset\n\t\tposts = posts\n\t}\n\tfetchPosts()\n\n\tlet wantToDraftPost = false\n\tlet newPostTitle = ''\n\tlet newPostMessage = ''\n\tfunction submitNewPost(): void {\n\t\tif (newPostTitle === '' || newPostMessage === '') {\n\t\t\treturn\n\t\t}\n\t\tposts.splice(0, 0, DB.submitNewPost(newPostTitle, newPostMessage))\n\t\tnewPostTitle = ''\n\t\tnewPostMessage = ''\n\t\twantToDraftPost = false\n\t\tposts = posts\n\t}\n\n\tfunction newPostAnim(node, o?) {\n\t\tconst height = node.offsetHeight\n\t\treturn {\n\t\t\tduration: 600,\n\t\t\tcss(t) {\n\t\t\t\tt = cubicInOut(t)\n\t\t\t\treturn (\n\t\t\t\t\t`height: ${height * t}px;` +\n\t\t\t\t\t`padding: ${20 * t}px 20px;` +\n\t\t\t\t\t`opacity: ${t};`\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<div id='PageTimeline' class='page'\nin:defaultPageTransition\nout:defaultPageTransition={{delay: 450}}\non:outroend={()=> dispatch('outroDone')}>\n\t<div class='new-post'>\n\t\t{#if wantToDraftPost}\n\t\t\t<div class='new-post-form' transition:newPostAnim>\n\t\t\t\t<input type='text'\n\t\t\t\t\tname='post-title'\n\t\t\t\t\tplaceholder='Title...'\n\t\t\t\t\tbind:value={newPostTitle}\n\t\t\t\t/>\n\t\t\t\t<textarea\n\t\t\t\t\tname='post-message'\n\t\t\t\t\trows='6'\n\t\t\t\t\tplaceholder='Message...'\n\t\t\t\t\tbind:value={newPostMessage}\n\t\t\t\t/>\n\t\t\t\t<div class='actions flex flex-center-y'>\n\t\t\t\t\t<button on:click={()=> wantToDraftPost = false}>\n\t\t\t\t\t\tClose\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class='flex-self-right' on:click={submitNewPost}>\n\t\t\t\t\t\tPost to the timeline\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<button on:click={()=> wantToDraftPost = true}\n\t\t\tclass='start-drafting' transition:newPostAnim>\n\t\t\t\t+ Create a new post\n\t\t\t</button>\n\t\t{/if}\n\t</div>\n\n\t{#each posts as post}<Post {post}/>{/each}\n\t{#if isLastPostReached}\n\t\t<button class='load-more' on:click={fetchPosts}>\n\t\t\tLoad more posts ({$DB.posts.length - offset} available)\n\t\t</button>\n\t{/if}\n</div>\n\n<style>\n\t:global(#PageTimeline .post) {\n\t\tmargin-bottom: 60px;\n\t}\n\t.load-more {\n\t\tpadding: 20px;\n\t\twidth: 100%;\n\t}\n\t.new-post {\n\t\tpadding: 0;\n\t\tmargin-bottom: 20px;\n\t\tborder-radius: 10px;\n\t\tbackground-color: var(--fg-clr);\n\t\tbox-shadow: var(--shadow);\n\t\toverflow: hidden;\n\t}\n\t.new-post .new-post-form {\n\t\tpadding: 20px;\n\t}\n\t.new-post input[name='post-title'],\n\t.new-post textarea[name='post-message'] {\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t\tmargin-bottom: 10px;\n\t\tresize: vertical;\n\t\tborder: none;\n\t\tbackground-color: var(--nav-btn-hover-bg);\n\t}\n\t.new-post input[name='post-title'] {\n\t\tfont-size: 1.25em;\n\t}\n\t.new-post .start-drafting {\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t\tpadding: 20px;\n\t\tborder-radius: inherit;\n\t\ttext-align: left;\n\t\tcolor: var(--prime);\n\t\toverflow: hidden;\n\t}\n\t.new-post .start-drafting:not(:hover) {\n\t\tborder-color: transparent;\n\t}\n</style>\n"],"names":[],"mappings":"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"}