{"version":3,"file":"RouterStruct-ec230d23.js","sources":["../../simple/routes/RouterStruct.svelte"],"sourcesContent":["<script lang='ts' context='module'>\n\timport type {RouterBeforePushArgs} from '@danielsharkov/svelte-router'\n\timport {writable, get as getStore} from 'svelte/store'\n\n\tlet blockedVisits = 0\n\tlet isUserRealDev = writable(true)\n\tlet rmvHook = writable(null)\n\n\tfunction actualHook({pendingRoute, resolve, reject}: RouterBeforePushArgs) {\n\t\tif (pendingRoute.name === 'router-struct') {\n\t\t\tif (!getStore(isUserRealDev) && blockedVisits < 2) {\n\t\t\t\tif (blockedVisits === 0) {\n\t\t\t\t\talert(`Haha! You're not a real developer, you won't get in here. ðŸ˜ˆ You dead-locked yourself out of this page and now you never gonna.... no, just kidding. Just retry and you'll get there. ðŸ™‚`)\n\t\t\t\t}\n\t\t\t\telse if (blockedVisits === 1) {\n\t\t\t\t\talert(`Ha ha ha haa!! You still won't get in here! ðŸ˜ˆ Alright, enough fun. Just retry, this time you really will get back in. ðŸ˜„`)\n\t\t\t\t}\n\t\t\t\tblockedVisits++\n\t\t\t\tif (blockedVisits === 2) {\n\t\t\t\t\tisUserRealDev.set(true)\n\t\t\t\t}\n\t\t\t\treturn reject()\n\t\t\t}\n\t\t\tblockedVisits = 0\n\t\t}\n\t\tresolve()\n\t}\n</script>\n\n<script lang='ts'>\n\timport {onMount, createEventDispatcher} from 'svelte'\n\timport {defaultPageTransition} from '../utils'\n\tconst dispatch = createEventDispatcher()\n\n\tonMount(()=> {\n\t\tdispatch('hasOutro')\n\t})\n\n\texport let router\n\tconst HookID = 'app.svelte_hook'\n\n\tlet isHookAdded = hookDoesExist()\n\n\tfunction hookDoesExist() {\n\t\ttry {\n\t\t\tconst rm = router.addBeforePushHook(HookID, ()=> {})\n\t\t\trm()\n\t\t}\n\t\tcatch(_) {return true}\n\t\treturn false\n\t}\n\n\tfunction addTestHook() {\n\t\tif (isHookAdded) return\n\n\t\trmvHook.set(\n\t\t\trouter.addBeforePushHook(HookID, actualHook)\n\t\t)\n\t\tblockedVisits = 0\n\t\tisHookAdded = !isHookAdded\n\t}\n\n\tfunction removeTestHook() {\n\t\tif (!isHookAdded) return\n\n\t\t$rmvHook()\n\t\trmvHook.set(null)\n\t\tblockedVisits = 0\n\t\tisHookAdded = !isHookAdded\n\t}\n\n\tfunction toggleHook() {\n\t\tif (isHookAdded) removeTestHook()\n\t\telse addTestHook()\n\t}\n\n\t$:if (!$isUserRealDev && isHookAdded) router.push('home')\n</script>\n\n<div class='page' transition:defaultPageTransition on:outroend={()=> dispatch('outroDone')}>\n\t<div class='misc'>\n\t\t<button on:click={toggleHook} class='add-hook-btn flex flex-center gap-05' class:hook-added={isHookAdded}>\n\t\t\t<svg class='icon stroke icon-1' viewBox='0 0 120 120' fill='none' xmlns='http://www.w3.org/2000/svg'>\n\t\t\t\t<path d='M20 58H60M100 58H60M60 58V21M60 58V100' stroke-width='6' stroke-linecap='round'/>\n\t\t\t</svg>\n\t\t\t<span class='label'>\n\t\t\t\t{#if isHookAdded}\n\t\t\t\t\tRemove before push hook\n\t\t\t\t{:else}\n\t\t\t\t\tAdd before push hook\n\t\t\t\t{/if}\n\t\t\t</span>\n\t\t</button>\n\t\t<div class='dev-user'>\n\t\t\t<label for='IsUserRealDev'>Am I a real developer?</label>\n\t\t\t<input type='checkbox'\n\t\t\t\tid='IsUserRealDev'\n\t\t\t\tbind:checked={$isUserRealDev}\n\t\t\t/>\n\t\t\t<span>{isUserRealDev ? 'Yes':'Nope'}</span>\n\t\t</div>\n\t\t<p>This example before push hook will block you from visiting this site when you're not a developer. What are you waiting? Add that hook by the button and uncheck the checkbox! ðŸ™‚</p>\n\t</div>\n\n\t<h2>Registered routes</h2>\n\t<pre><code>\n\t\t{JSON.stringify($router.routes, null, 4)}\n\t</code></pre>\n\n\t<h2>Current location</h2>\n\t<pre><code>\n\t\t{JSON.stringify($router.location, null, 4)}\n\t</code></pre>\n</div>\n\n<style>\n\t.misc, pre {\n\t\tpadding: 10px;\n\t\tbox-shadow: var(--shadow);\n\t\tbackground-color: var(--fg-clr);\n\t\tborder-radius: .5em;\n\t}\n\t.add-hook-btn .icon {\n\t\ttransition-duration: .2s;\n\t\ttransition-property: transform;\n\t\twill-change: transform;\n\t}\n\t.add-hook-btn .icon > * {\n\t\tstroke: #00c853;\n\t}\n\t.add-hook-btn.hook-added .icon {\n\t\ttransform: rotate(135deg);\n\t}\n\t.add-hook-btn.hook-added .icon > * {\n\t\tstroke: #ff1744;\n\t}\n\tcode {\n\t\tfont-family: 'Fire Code', monospace;\n\t\tfont-variant-ligatures: normal;\n\t\tfont-size: .8em;\n\t}\n\t.misc {\n\t\tmargin-bottom: 20px;\n\t\tpadding: 20px;\n\t}\n\t.dev-user {\n\t\tdisplay: flex;\n\t\tmargin-top: .5em;\n\t\talign-content: center;\n\t\talign-items: center;\n\t\tgap: 10px;\n\t\tfont-size: .75em;\n\t}\n\t.dev-user > input {\n\t\tmargin: 0;\n\t}\n</style>\n"],"names":["getStore"],"mappings":"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"}