import{S as t,i as e,s,e as n,b as l,c as o,f as a,g as c,l as i,z as r,w as u,A as f,v as p,j as d,X as m,Y as g,n as h,B as v,R as x,o as $,p as b,C as w,D as C,E as k,t as y,h as P,W as j,V as T,x as B,k as D,Z as z,r as A,_ as E}from"./main-e9d5581a.js";import{P as H}from"./Post-5cfd9572.js";import"./Thread-ac17e56d.js";function L(t,e,s){const n=t.slice();return n[16]=e[s],n}function M(t){let e,s,l,c,r;return{c(){e=n("button"),e.textContent="+ Create a new post",o(e,"class","start-drafting svelte-ci91df")},m(s,n){a(s,e,n),l=!0,c||(r=i(e,"click",t[14]),c=!0)},p:B,i(n){l||(d((()=>{s||(s=D(e,t[10],{},!0)),s.run(1)})),l=!0)},o(n){s||(s=D(e,t[10],{},!1)),s.run(0),l=!1},d(t){t&&h(e),t&&s&&s.end(),c=!1,r()}}}function N(t){let e,s,r,u,f,p,m,g,v,x,$,b,w;return{c(){e=n("div"),s=n("input"),r=l(),u=n("textarea"),f=l(),p=n("div"),m=n("button"),m.textContent="Close",g=l(),v=n("button"),v.textContent="Post to the timeline",o(s,"type","text"),o(s,"name","post-title"),o(s,"placeholder","Title..."),o(s,"class","svelte-ci91df"),o(u,"name","post-message"),o(u,"rows","6"),o(u,"placeholder","Message..."),o(u,"class","svelte-ci91df"),o(v,"class","flex-self-right"),o(p,"class","actions flex flex-center-y"),o(e,"class","new-post-form svelte-ci91df")},m(n,l){a(n,e,l),c(e,s),z(s,t[4]),c(e,r),c(e,u),z(u,t[5]),c(e,f),c(e,p),c(p,m),c(p,g),c(p,v),$=!0,b||(w=[i(s,"input",t[11]),i(u,"input",t[12]),i(m,"click",t[13]),i(v,"click",t[9])],b=!0)},p(t,e){16&e&&s.value!==t[4]&&z(s,t[4]),32&e&&z(u,t[5])},i(s){$||(d((()=>{x||(x=D(e,t[10],{},!0)),x.run(1)})),$=!0)},o(s){x||(x=D(e,t[10],{},!1)),x.run(0),$=!1},d(t){t&&h(e),t&&x&&x.end(),b=!1,A(w)}}}function O(t){let e,s;return e=new H({props:{post:t[16]}}),{c(){w(e.$$.fragment)},m(t,n){C(e,t,n),s=!0},p(t,s){const n={};4&s&&(n.post=t[16]),e.$set(n)},i(t){s||(p(e.$$.fragment,t),s=!0)},o(t){u(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function R(t){let e,s,l,r,u,f,p=t[1].posts.length-t[0]+"";return{c(){e=n("button"),s=y("Load more posts ("),l=y(p),r=y(" available)"),o(e,"class","load-more svelte-ci91df")},m(n,o){a(n,e,o),c(e,s),c(e,l),c(e,r),u||(f=i(e,"click",t[8]),u=!0)},p(t,e){3&e&&p!==(p=t[1].posts.length-t[0]+"")&&P(l,p)},d(t){t&&h(e),u=!1,f()}}}function S(t){let e,s,x,$,b,w,C,k,y,P,T;const B=[N,M],D=[];function z(t,e){return t[3]?0:1}x=z(t),$=D[x]=B[x](t);let A=t[2],E=[];for(let e=0;e<A.length;e+=1)E[e]=O(L(t,A,e));const H=t=>u(E[t],1,1,(()=>{E[t]=null}));let S=t[6]&&R(t);return{c(){e=n("div"),s=n("div"),$.c(),b=l();for(let t=0;t<E.length;t+=1)E[t].c();w=l(),S&&S.c(),o(s,"class","new-post svelte-ci91df"),o(e,"id","PageTimeline"),o(e,"class","page")},m(n,l){a(n,e,l),c(e,s),D[x].m(s,null),c(e,b);for(let t=0;t<E.length;t+=1)E[t].m(e,null);c(e,w),S&&S.m(e,null),y=!0,P||(T=i(e,"outroend",t[15]),P=!0)},p(t,[n]){let l=x;if(x=z(t),x===l?D[x].p(t,n):(r(),u(D[l],1,1,(()=>{D[l]=null})),f(),$=D[x],$?$.p(t,n):($=D[x]=B[x](t),$.c()),p($,1),$.m(s,null)),4&n){let s;for(A=t[2],s=0;s<A.length;s+=1){const l=L(t,A,s);E[s]?(E[s].p(l,n),p(E[s],1)):(E[s]=O(l),E[s].c(),p(E[s],1),E[s].m(e,w))}for(r(),s=A.length;s<E.length;s+=1)H(s);f()}t[6]?S?S.p(t,n):(S=R(t),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i(t){if(!y){p($);for(let t=0;t<A.length;t+=1)p(E[t]);d((()=>{k&&k.end(1),C=m(e,j,{}),C.start()})),y=!0}},o(t){u($),E=E.filter(Boolean);for(let t=0;t<E.length;t+=1)u(E[t]);C&&C.invalidate(),k=g(e,j,{delay:450}),y=!1},d(t){t&&h(e),D[x].d(),v(E,t),S&&S.d(),t&&k&&k.end(),P=!1,T()}}}function V(t,e,s){let n,l;x(t,T,(t=>s(1,l=t)));const o=$();b((()=>{o("hasOutro")}));let a=[],c=0;function i(){const t=l.posts.length<c+10?l.posts.length:c+10;s(2,a=a.concat(l.posts.slice(c,t))),s(0,c=t),s(2,a)}i();let r=!1,u="",f="";return t.$$.update=()=>{3&t.$$.dirty&&s(6,n=l.posts.length>c)},[c,l,a,r,u,f,n,o,i,function(){""!==u&&""!==f&&(a.splice(0,0,T.submitNewPost(u,f)),s(4,u=""),s(5,f=""),s(3,r=!1),s(2,a))},function(t,e){const s=t.offsetHeight;return{duration:600,css:t=>(t=E(t),`height: ${s*t}px;padding: ${20*t}px 20px;opacity: ${t};`)}},function(){u=this.value,s(4,u)},function(){f=this.value,s(5,f)},()=>s(3,r=!1),()=>s(3,r=!0),()=>o("outroDone")]}class W extends t{constructor(t){super(),e(this,t,V,S,s,{})}}export{W as default};
